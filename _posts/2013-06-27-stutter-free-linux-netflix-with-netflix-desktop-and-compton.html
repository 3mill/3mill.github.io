---
layout: post
title: "Stutter-Free Linux Netflix with Netflix-Desktop and Compton"
---

<h2>{{ page.title }}</h2>

<p class="publish_date">27 Jun 2013</p>

<p>Netflix has mentinoned that it will soon switch to a HTML5 for its desktop video player, but
  at least until that happens (and hopefully not after), Linux users are stuck with some pretty
  hacky workarounds. In fact, running Netflix inside a virtual machine was previously considered
  the most reliable option. Fortunately, now there's Netflix-Desktop, a cleaner hack which is comprised of
  a patched version of WINE using Firefox and Microsoft Silverlight.</p>

<p>Installation: </p>
<ul>
<li><a class="red" href="http://www.howtogeek.com/130372/how-to-watch-netflix-on-ubuntu-with-the-netflix-desktop-app/">
    Instructions for getting Netflix-Desktop on a Debian-based system (Ubuntu) </a></li>

<li><a class="red" href="https://aur.archlinux.org/packages/netflix-desktop/">
    If you use Arch Linux like me, you can get Netflix-Desktop from the AUR</a></li>
</ul>

    <p> I had no issues getting Netflix-Desktop installed and running, but as soon as I started watching
      something, there were problems.  The first was a hideous, unwatchable amount of screen-tearing. The
      second was an absolute cacophony of audio stuttering and popping.  At first I thought the audio issue might
      be with my PulseAudio or ALSA settings, but both problems were easily solved by getting vsync working.</p>

    <p>Previously, I had tried to use the Nvidia settings panel to no avail.  I also tried enabling the
      compositor in Xfce4.  Nothing. In fact, when I enabled the Xfce4 compositor, it generated a horrendous
      amount of tearing in games that previously seemed to have vsync working. I was pretty frustrated until
      I came across an old friend of mine, compton.</p>

    <p><a class="red" href="https://github.com/chjj/compton">Compton</a> is a lightweight Xlib compositor 
      that agnostically runs on top of window managers. It provides features like:
    <ul>
      <li>real transparency</li>
      <li>shadows</li>
      <li>fade-in/out</li>
      <li>blur</li>
    </ul>

    But most importantly, compton gives you an opengl desktop with vsync. In my case, this was 
    very useful since my 1st party drivers didn't seem to be doing the job. With compton, the screen 
    tearing completely went away, and the audio stuttering is now no worse than in anything else in my system.</p>

  <p><a class="red" href="http://ubuntuforums.org/showthread.php?t=2144468">Here is some information</a> 
    about getting compton for Ubuntu, as well as a description of some of the options. If you're in 
    Arch Linux, you can use the
  <a class="red" href="https://aur.archlinux.org/packages/compton-git/">compton-git</a> AUR package.

  <p>Here are the options that I use (same as the aformentioned post's) for near-perfect Netflix-Desktop playback:</p>

  <p class="terminal">compton --backend glx --paint-on-overlay --glx-no-stencil \ <br />
    --glx-no-rebind-pixmap --vsync opengl-swc --detect-client-opacity \ <br /> --shadow-exclude "! name~=''" 
    -b</p>

  <p> Unforunately, I can't seem to get compton started via .xinitrc or the Xfce4 startup manager. If you're
    using Xfce4, you might have to start it manually.</p>

  <p><b>UPDATE: </b>There is an old trick where instead of putting the command in .xinitrc, the command is
    placed in a shell script which gets executed in .xinitrc. I just verified that this works with compton.
    Just make sure the shell script has permission to execute and has #!/bin/bash (or whatever will be
    executing the script) at the top.</p>
